# 卓球戦績管理システムの仕様書

### 概要
* 対戦結果入力：卓球の対戦相手との対戦結果を入力できること．<br>
  どの大会のどの段階（例：準決勝）での対戦で，結果はどうだったのか
* 対戦結果検索：対戦相手を指定すると勝敗が表示される

### 1. ユーザー機能
#### 1.1. アカウント新規登録機能
ログイン画面の「新規登録」ボタンを押すとアカウント作成画面に遷移する．
新規登録に成功するとログイン画面に遷移する．

#### 1.2. ログイン機能
ログインに成功するとトップページに遷移する．

#### 1.3. 対戦結果登録機能
トップページから「対戦結果登録」のボタンを押すと対戦結果登録画面に遷移する．
新規登録に成功するとトップページに遷移する．

#### 1.4. 対戦結果検索機能
対戦結果検索画面から対戦相手を検索すると候補画面に遷移する．
候補一覧から詳しくみたい対戦を押すと，対戦結果詳細画面(結果や対戦場面)が表示される．

#### 1.5. 対戦結果編集機能
対戦結果詳細画面から「対戦結果編集」ボタンを押すと編集画面に遷移する．
編集に成功すると対戦結果詳細画面に遷移する．

#### 1.6. 対戦結果削除機能
対戦結果詳細画面から「削除」ボタンを押すと削除される．

#### 1.7. ログアウト機能
トップページの「ログアウト」を押すと，ログイン画面に遷移する．

#### 1.8. パスワード変更機能
ログイン画面，またはマイページの「パスワード変更」ボタンを押すとパスワード変更画面に遷移する．
新しく設定したいパスワードを入力してもらい，新規登録の際に設定した秘密の質問に答えてもらう．
答えがあっていたら再設定に成功し，ログイン画面に遷移する．

#### 1.8. アカウント削除機能
トップページの「アカウント削除」を押すと，アカウントが削除される．
アカウントが削除されると今までユーザーが登録したものは全て削除される．

### 2. データベース概要
#### 2.1. ユーザーデータベース(users)

|名前|説明|制約|備考|
|:---:|:---:|:---:|:---:|
|id|カラム特定のためのid|auto_increment<br>primary key|-
|name|ユーザー名|not null<br>varchar 20|-
|mail|メールアドレス|not null<br>unique<br>varchar 255|-
|ps|パスワード|not null<br>varchar 20|-
|answer|質問の答え|not null<br>varchar 100|-
|created_at|作成日時|not null<br>date|-
|updated_at|更新日時|not null<br>date|-
|question_id|秘密の質問|not null|外部キー

#### 2.2. 対戦結果データベース(result)

|名前|説明|制約|備考|
|:---:|:---:|:---:|:---:|
|id|カラム特定のためのid|auto_increment<br>primary key|-
|round|試合の段階|not null<br>varchar 20|-
|match_name|大会の名前|not null<br>varchar 100|-
|my_score|自分の得点|not null<br>int 10|-
|opponent_score|相手の得点|not null<br>int 10|-
|match_date|試合の日付|not null<br>date|-
|opponent_name|相手の名前|not null<br>varchar 20|-
|created_at|作成日時|not null<br>date|-
|updated_at|更新日時|not null<br>date|-
|user_id|ユーザーのid|not null|外部キー
